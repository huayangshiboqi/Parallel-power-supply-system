
#include"library.h"
#include "msp430.h"
#include"stdio.h"
/*************Pin Define***************/
#define SCL_HIGH  P1OUT|=BIT2           //SCL P1.0
#define SCL_LOW   P1OUT&=~BIT2
#define SDA_HIGH  P1OUT|=BIT3           //SDA P1.1
#define SDA_LOW   P1OUT&=~BIT3

/****************************************************/
void jiance(int t);
void Initial_LY096BG30();
void Delay_50ms(unsigned int Del_50ms);
void Delay_1ms(unsigned int Del_1ms);
void fill_picture(unsigned char fill_Data);
void Picture_1();
void IIC_Start();
void IIC_Stop();
void Write_IIC_Command(unsigned char IIC_Command);
void Write_IIC_Data(unsigned char IIC_Data);
void Write_IIC_Byte(unsigned char IIC_Byte);
/***********************Initial code*********************/
void Initial_LY096BG30()
{
Write_IIC_Command(0xAE);   //display off
Write_IIC_Command(0x20);   //Set Memory Addressing Mode
Write_IIC_Command(0x10);   //00,Horizontal Addressing Mode;01,Vertical Addressing Mode;10,Page Addressing Mode (RESET);11,Invalid
Write_IIC_Command(0xb0); //Set Page Start Address for Page Addressing Mode,0-7
Write_IIC_Command(0xc8); //Set COM Output Scan Direction
Write_IIC_Command(0x00);//---set low column address
Write_IIC_Command(0x10);//---set high column address
Write_IIC_Command(0x40);//--set start line address
Write_IIC_Command(0x81);//--set contrast control register
Write_IIC_Command(0x7f);
Write_IIC_Command(0xa1);//--set segment re-map 0 to 127
Write_IIC_Command(0xa6);//--set normal display
Write_IIC_Command(0xa8);//--set multiplex ratio(1 to 64)
Write_IIC_Command(0x3F);//
Write_IIC_Command(0xa4);//0xa4,Output follows RAM content;0xa5,Output ignores RAM content
Write_IIC_Command(0xd3);//-set display offset
Write_IIC_Command(0x00);//-not offset
Write_IIC_Command(0xd5);//--set display clock divide ratio/oscillator frequency
Write_IIC_Command(0xf0);//--set divide ratio
Write_IIC_Command(0xd9);//--set pre-charge period
Write_IIC_Command(0x22); //
Write_IIC_Command(0xda);//--set com pins hardware configuration
Write_IIC_Command(0x12);
Write_IIC_Command(0xdb);//--set vcomh
Write_IIC_Command(0x20);//0x20,0.77xVcc
Write_IIC_Command(0x8d);//--set DC-DC enable
Write_IIC_Command(0x14);//
Write_IIC_Command(0xaf);//--turn on oled panel
}
/***********************Picture Code**************************/
//128*64个像素点；
//一个0x00,是16位，规定的是从上往下的十六个点的取值。而后一列接着一列横向往下写数据。
unsigned char  show1[]=
{
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

};
//20*16
unsigned char  *show2;//用一个指针型的指向需要显示的数组，方式更灵活
unsigned char show3[]=
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x00,0x00,0x78,0x78,0x78,0x78,0x00,0x00,/*"未命名文件",0*/
};
/**********************************************
//IIC Start
**********************************************/
void IIC_Start()
{
   SCL_HIGH;
   //Delay_us(1);
   SDA_HIGH;
   //Delay_us(1);
   SDA_LOW;
  // Delay_us(1);
   SCL_LOW;
  // Delay_us(1);
}
/**********************************************
//IIC Stop
**********************************************/
void IIC_Stop()
{
     SCL_LOW;
   //Delay_us(1);
   SDA_LOW;
   //Delay_us(1);
    SCL_HIGH;
   //Delay_us(1);
   SDA_HIGH;
   //Delay_us(1);
}
/**********************************************
// IIC Write byte
**********************************************/
void Write_IIC_Byte(unsigned char IIC_Byte)
{
unsigned char i;
for(i=0;i<8;i++)
{
  if(IIC_Byte & 0x80)  //1?0?
   SDA_HIGH;
  else
   SDA_LOW;
  //Delay_us(1);
   SCL_HIGH;
  //Delay_us(1);
   SCL_LOW;
  //Delay_us(1);
  IIC_Byte<<=1;   //loop
}
  SDA_HIGH;
//Delay_us(1);
SCL_HIGH;
//Delay_us(1);
  SCL_LOW;
//Delay_us(1);
}
void Write_IIC_Byte2(unsigned char IIC_Byte)
{
unsigned char i;
for(i=0;i<8;i++)
{
  if(IIC_Byte & 0x80)  //1?0?
   SDA_HIGH;

  else
 //  SDA_LOW;
	  SDA_HIGH;
	  //Delay_us(1);
   SCL_HIGH;
  //Delay_us(1);
   SCL_LOW;
  //Delay_us(1);
  IIC_Byte<<=1;   //loop
}
  SDA_HIGH;
//Delay_us(1);
SCL_HIGH;
//Delay_us(1);
  SCL_LOW;
//Delay_us(1);
}
/**********************************************
// IIC Write Command
**********************************************/
void Write_IIC_Command(unsigned char IIC_Command)
{
   IIC_Start();
   Write_IIC_Byte(0x78);            //Slave address,SA0=0
   Write_IIC_Byte(0x00);   //write command
   Write_IIC_Byte(IIC_Command);
   IIC_Stop();
}
void Write_IIC_Command2(unsigned char IIC_Command)
{
   IIC_Start();
   Write_IIC_Byte(0x78);            //Slave address,SA0=0
   Write_IIC_Byte(0x00);   //write command
   Write_IIC_Byte2(IIC_Command);
   IIC_Stop();
}
/**********************************************
// IIC Write Data
**********************************************/
void Write_IIC_Data(unsigned char IIC_Data)
{
   IIC_Start();
   Write_IIC_Byte(0x78);
   Write_IIC_Byte(0x40);   //write data
   Write_IIC_Byte(IIC_Data);
   IIC_Stop();
}
void Write_IIC_Data2(unsigned char IIC_Data)
{
   IIC_Start();
   Write_IIC_Byte(0x78);
   Write_IIC_Byte(0x64);   //write data
   Write_IIC_Byte(IIC_Data);
   IIC_Stop();
}
/********************************************
// fill_Picture
********************************************/
void fill_picture(unsigned char fill_Data)
{
unsigned char m,n;
for(m=0;m<8;m++)
{
  Write_IIC_Command(0xb0+m);  //page0-page1
  Write_IIC_Command(0x00);  //low column start address
  Write_IIC_Command(0x10);  //high column start address
  for(n=0;n<128;n++)
   {
    Write_IIC_Data(fill_Data);
   }
}
}
/******************************************
// picture
******************************************/
//a,b是开始于哪一行，那一列
//128*64个点，横向一列接着一列写，共128列，竖向以8位为一次一列写入的值，竖向写64/8=8行。
//a,b分别为开始于哪一行，那一列，在实际写的过程中，要注意不要让数据的位数超过像素点的总和，不然会出现重头开始接着写的情况。
//b,每加一，即使增加16列

void Picture_1()
{
  unsigned char x,y,a=0,b=0;
  unsigned int i=0;
  for(y=0;y<8;y++)//这里y的取值，是写多少行
    {
      Write_IIC_Command(0xb0+y+a);//从哪一行开始
      Write_IIC_Command(0x00);
      Write_IIC_Command(0x10+b);//从那一列开始
      for(x=0;x<129;x++)//这里x的取值，是写多少列后开始转行。
        {
          Write_IIC_Data(show1[i++]);
        }
    }
}
void Picture_shuzi(float p,int a,int b)//显示float型的数据，000.00形式
{
  unsigned char x,y;
  unsigned int i=0,t,c;
  c=(unsigned int)(p*100);      //将数据变成整数,显示的是2位小数，可调整
  t=c%10;c=c/10;       //取数的第一位
  jiance(t);           //判断该数的值，0-9
  for(y=0;y<2;y++)
    {
      Write_IIC_Command(0xb0+y+a);
      Write_IIC_Command(0x00);
      Write_IIC_Command(0x10+b+3);  //显示最后一位,在同一行，列数是从后往前写的。
      for(x=0;x<16;x++)
        {
          Write_IIC_Data(show2[i++]);
        }
    }
  t=c%10;c=c/10;i=0;
    jiance(t);
    for(y=0;y<2;y++)
      {
        Write_IIC_Command(0xb0+y+a);
        Write_IIC_Command(0x00);
        Write_IIC_Command(0x10+b+2);
        for(x=0;x<16;x++)
          {
            Write_IIC_Data(show2[i++]);
          }
      }i=0;
    for(y=0;y<2;y++)
      {
        Write_IIC_Command(0xb0+y+a);
        Write_IIC_Command(0x00);
        Write_IIC_Command(0x10+b+1);
        for(x=0;x<16;x++)
          {
            Write_IIC_Data(xiaoshudian[i++]);
          }
      }i=0;
    t=c%10;c=c/10;i=0;
      jiance(t);
      for(y=0;y<2;y++)
        {
          Write_IIC_Command(0xb0+y+a);
          Write_IIC_Command(0x00);
          Write_IIC_Command(0x10+b+0);
          for(x=0;x<16;x++)
            {
              Write_IIC_Data(show2[i++]);
            }
        }i=0;

/*      t=c%10;c=c/10;i=0;
        jiance(t);
        for(y=0;y<2;y++)
          {
            Write_IIC_Command(0xb0+y+a);
            Write_IIC_Command(0x00);
            Write_IIC_Command(0x10+b+1);
            for(x=0;x<16;x++)
              {
                Write_IIC_Data(show2[i++]);
              }
          }
        t=c%10;c=c/10;i=0;
          jiance(t);
          for(y=0;y<2;y++)
            {
              Write_IIC_Command(0xb0+y+a);
              Write_IIC_Command(0x00);
              Write_IIC_Command(0x10+b);
              for(x=0;x<16;x++)
                {
                  Write_IIC_Data(show2[i++]);
                }
            }*/
}

void Picture_shuzi2(float p,int a,int b)//显示float型的数据，000.00形式
{
  unsigned char x,y;
  unsigned int i=0,t,c;
  c=(unsigned int)(p*10);      //将数据变成整数,显示的是2位小数，可调整
  t=c%10;c=c/10;i=0;
    jiance(t);
    for(y=0;y<2;y++)
      {
        Write_IIC_Command(0xb0+y+a);
        Write_IIC_Command(0x00);
        Write_IIC_Command(0x10+b+2);
        for(x=0;x<16;x++)
          {
            Write_IIC_Data(show2[i++]);
          }
      }i=0;
    for(y=0;y<2;y++)
      {
        Write_IIC_Command(0xb0+y+a);
        Write_IIC_Command(0x00);
        Write_IIC_Command(0x10+b+1);
        for(x=0;x<16;x++)
          {
            Write_IIC_Data(xiaoshudian[i++]);
          }
      }i=0;
    t=c%10;c=c/10;i=0;
      jiance(t);
      for(y=0;y<2;y++)
        {
          Write_IIC_Command(0xb0+y+a);
          Write_IIC_Command(0x00);
          Write_IIC_Command(0x10+b+0);
          for(x=0;x<16;x++)
            {
              Write_IIC_Data(show2[i++]);
            }
        }i=0;

/*      t=c%10;c=c/10;i=0;
        jiance(t);
        for(y=0;y<2;y++)
          {
            Write_IIC_Command(0xb0+y+a);
            Write_IIC_Command(0x00);
            Write_IIC_Command(0x10+b+1);
            for(x=0;x<16;x++)
              {
                Write_IIC_Data(show2[i++]);
              }
          }
        t=c%10;c=c/10;i=0;
          jiance(t);
          for(y=0;y<2;y++)
            {
              Write_IIC_Command(0xb0+y+a);
              Write_IIC_Command(0x00);
              Write_IIC_Command(0x10+b);
              for(x=0;x<16;x++)
                {
                  Write_IIC_Data(show2[i++]);
                }
            }*/
}
void Picture_shuzizheng(int p,int a,int b)//显示整数
{
  unsigned char x,y;
  unsigned int t[5]={0};
  int e=0,c=0, i=0;                      //调试的时候，这里出现问题，(e>0)||(e==0);e--，之前类型是unsigned int型
		                                  //在e减到0及-1的时候会产生溢出，程序出现错误，不能正常比较(e>0)||(e==0)
  while(1)
  {
	  t[c]=p%10;//取数的第一位
	  c++;
      if(p!=0)
      {
    	  p=p/10;
      }
      if(p==0)
      {
    	  break;
      }
  }
	  for(e=c-1;(e>0)||(e==0);e--)
	  {
		  jiance(t[e]);
            for(y=0;y<2;y++)
           {
                 Write_IIC_Command(0xb0+y+a);
                 Write_IIC_Command(0x00);
                 Write_IIC_Command(0x10+b+c-1-e);  //显示最后一位,在同一行，列数是从后往前写的。
                 for(x=0;x<16;x++)
                  {
                           Write_IIC_Data(show2[i++]);
                  }
           }i=0;
	  }
}
void Picture_hanzi(unsigned char *p[],int nn,int a,int b)//依次是要显示的字符，字符的个数，显示的地点
{
  unsigned char x,y;
  unsigned int i=0,n=0;
  for(;n<nn;n++)
  {
  for(y=0;y<2;y++)//这里y的取值，是写多少行,一行是写8个元素点
    {
      Write_IIC_Command(0xb0+y+a);//从哪一行开始
      Write_IIC_Command(0x00);
      Write_IIC_Command(0x10+b+n);//从那一列开始
      for(x=0;x<16;x++)//这里x的取值，是写多少列后开始转行。
        {
          Write_IIC_Data(p[n][i++]);
        }
    }i=0;
  }
}





/***********************Delay****************************************/
void Delay_50ms(unsigned int Del_50ms)  //
{
unsigned int m;
for(;Del_50ms>0;Del_50ms--)
  for(m=6245;m>0;m--);
}
void Delay_1ms(unsigned int Del_1ms)  //
{
unsigned char j;
while(Del_1ms--)
{
  for(j=0;j<123;j++);
}
}
void jiance(int t)//判断数字，确定应该显示的数据
{
	if(t==0)
		show2=LING;
	if(t==1)
		show2=YI;
	if(t==2)
		show2=ER;
	if(t==3)
		show2=SAN;
	if(t==4)
		show2=SI;
	if(t==5)
		show2=WU;
	if(t==6)
		show2=LIU;
	if(t==7)
		show2=QI;
	if(t==8)
		show2=BA;
	if(t==9)
		show2=JIU;
	}

/*******************************Main*******************************/
void OLED(void)
{
	unsigned char * bba[]={dian,ya,maohao,kong,kong,kong,kong,v};                 //指针型数组，ba[0]里面存的是一个指针型变量
	unsigned char * bbb[]={I,YI,maohao,kong,kong,kong,kong,an};
	unsigned char * bbb1[]={I,ER,maohao,kong,kong,kong,kong,an};
	unsigned char * bbc[]={she,zhi,maohao,kong,kong,kong,maohao,YI};
    P1DIR|=BIT3;P1DIR|=BIT2;
    Initial_LY096BG30();
    Delay_1ms(5);
    fill_picture(0xff); Delay_50ms(25);
    fill_picture(0xf0); Delay_50ms(25);
    Picture_1();  Delay_50ms(25);//刷屏，初始显示

/*    Picture_shuzi(1.23,0,4);Delay_50ms(50);
    Picture_shuzi(1.23,2,4);//具体显示数据，显示行数，显示列数
    Picture_hanzi(ba,4,4,0);//依次是显示的字符，显示汉字的个数，显示行数，显示列数*/
    Picture_hanzi(bba,8,0,0);//第一行显示：电压
    Picture_hanzi(bbb,8,2,0);//第二行显示：I1
    Picture_hanzi(bbb1,8,4,0);//第三行 I2
    Picture_hanzi(bbc,8,6,0);//第四行     显示设置的比例
}
